<ng-container *ngIf="!loading && !error">
  <div fxLayout="row" fxLayoutAlign="center">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 mt-2" fxFlex="90%" fxFlexOffset.gt-xs="5%">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>

      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef>First Name</th>
        <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
      </ng-container>

      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef>Last Name</th>
        <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
      </ng-container>

      <ng-container matColumnDef="roles">
        <th mat-header-cell *matHeaderCellDef>Roles</th>
        <td mat-cell *matCellDef="let element"> {{element.roles | roles}} </td>
      </ng-container>

      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef style="width: 250px">
          <button mat-raised-button color="primary" [routerLink]="['create']">Create</button>
        </th>
        <td mat-cell *matCellDef="let element">
          <button mat-stroked-button [routerLink]="[element.id, 'details']">Open</button>
          <button mat-stroked-button [routerLink]="[element.id, 'edit']">Edit</button>
          <button mat-stroked-button color="accent" (click)="deleteUser(element.id)">Delete</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</ng-container>

<ng-container *ngIf="loading">
  <div fxFill fxLayout="row" fxLayoutAlign="center center">
    <mat-spinner mode="indeterminate"></mat-spinner>
  </div>
</ng-container>

<ng-container *ngIf="error">
  <div fxFill fxLayout="row" fxLayoutAlign="center center">
    <mat-card class="height-auto mat-elevation-z0 card-error-outline" fxFlex.xs="95%" fxFlex.sm="75%" fxFlex.md="50%"
              fxFlex.lg="30%"
              fxFlex.xl="30%">
      <mat-card-content fxLayout="column">
        <mat-card class="height-auto mat-elevation-z0">
          <mat-card-content fxLayout="row" fxLayoutAlign="center center" fxFill>
            <span class="mat-display-1">{{ error }}</span>
          </mat-card-content>
        </mat-card>
        <span fxFlex="12px"></span>
      </mat-card-content>
      <mat-card-actions>
        <span fxFlex></span>
        <button mat-raised-button (click)="tryAgain()">Try again</button>
        <span fxFlex></span>
      </mat-card-actions>
    </mat-card>
  </div>
</ng-container>
